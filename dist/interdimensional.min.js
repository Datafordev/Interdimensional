/*
 *  Interdimensional - v0.0.1-alpha
 *  Spatial scrolling for your web pages.
 *  http://vodkabears.github.io/interdimensional/
 *
 *  Made by Ilya Makarov <dfrost.00@gmail.com>
 *  Under MIT License
 */

!function(a,b){"use strict";var c=function(){function d(c,d){a.DeviceOrientationEvent&&("ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch)||d(),a.addEventListener("deviceorientation",function e(b){a.removeEventListener("deviceorientation",e,!1),s&&(null!=b.alpha||null!=b.beta||null!=b.gamma?c():d())},!1)}function e(a){var b,c,d,e,f,g,h,i={};for(f=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),h=0,g=f.length;g>h&&(c=f[h],-1===c.search(/^(http|https|ftp):\/\//)&&-1!==c.search(":"));h++)b=c.indexOf(":"),d=c.substring(0,b),e=c.substring(b+1),e||(e=void 0),"string"==typeof e&&(e="true"===e||("false"===e?!1:e)),"string"==typeof e&&(e=isNaN(e)?e:+e),i[d]=e;return null==d&&null==e?a:i}function f(a,b){var c=b-a,d=Math.abs(c),e=0===c?0:c/d;return d>o.insensitivity?o.PPD*(c-e*o.insensitivity):0}function g(c){var d;c&&(c="interdimensional:"+c,a.Event&&"function"==typeof a.Event?d=new Event(c):(d=b.createEvent("Event"),d.initEvent(c,!0,!0)),b.dispatchEvent(d))}function h(){c.toggle()}function i(b){t&&null!=l&&null!=m&&null!=n?a.innerHeight>a.innerWidth?a.scrollBy(f(l,b.alpha),f(m,b.beta)):a.scrollBy(f(m,b.beta),f(n,b.gamma)):(l=b.alpha,m=b.beta,n=b.gamma)}function j(){c.kick()}function k(){var a=b.body.getAttribute("data-interdimensional");null!=a&&c.charge(e(a))}var l,m,n,o,p,q={PPD:2,insensitivity:5,useControl:!0},r=!1,s=!1,t=!1;return b.addEventListener("DOMContentLoaded",k,!1),{isCharged:function(){return r},isOn:function(){return t},charge:function(c){r||s||(s=!0,d(function(){r=!0,s=!1,o={};for(var d in q)q.hasOwnProperty(d)&&(o[d]=c&&"undefined"!=typeof c[d]?c[d]:q[d]);p=b.createElement("div"),p.className="interdimensional-control",o.useControl&&b.body.appendChild(p),p.addEventListener("touchstart",h,!1),a.addEventListener("deviceorientation",i,!1),a.addEventListener("orientationchange",j,!1),g("charge")},function(){s=!1,g("fail")}))},jump:function(){r&&(t=!0,p.classList.add("interdimensional-control-is-active"),g("jump"))},kick:function(){r&&(t=!1,p.classList.remove("interdimensional-control-is-active"),g("kick"))},toggle:function(){t?c.kick():c.jump()},discharge:function(){r&&(c.kick(),r=!1,o.useControl&&b.body.removeChild(p),p.removeEventListener("touchstart",h,!1),a.removeEventListener("deviceorientation",i,!1),a.removeEventListener("orientationchange",j,!1),g("discharge"))}}}();a.Interdimensional=c}(window,document);