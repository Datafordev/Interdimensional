/*
 *  Interdimensional - v0.0.1-alpha
 *  Spatial scrolling for your web pages.
 *  http://vodkabears.github.io/interdimensional/
 *
 *  Made by Ilya Makarov <dfrost.00@gmail.com>
 *  Under MIT License
 */

!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.Interdimensional=b()}(this,function(){"use strict";function a(a,b){if(!("DeviceOrientationEvent"in window))return b();var c=setTimeout(function(){window.removeEventListener("deviceorientation",d,!1),b()},2e3),d=function(e){clearTimeout(c),window.removeEventListener("deviceorientation",d,!1),r&&(null!=e.alpha||null!=e.beta||null!=e.gamma?a():b())};window.addEventListener("deviceorientation",d,!1)}function b(a){var b,c,d,e,f,g,h,i={};for(f=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),h=0,g=f.length;g>h&&(c=f[h],-1===c.search(/^(http|https|ftp):\/\//)&&-1!==c.search(":"));h++)b=c.indexOf(":"),d=c.substring(0,b),e=c.substring(b+1),e||(e=void 0),"string"==typeof e&&(e="true"===e||("false"===e?!1:e)),"string"==typeof e&&(e=isNaN(e)?e:+e),i[d]=e;return null==d&&null==e?a:i}function c(a,b){var c=b-a,d=Math.abs(c),e=0===c?0:c/d;return d>m.insensitivity?m.PPD*(c-e*m.insensitivity):0}function d(a){var b;a&&(a="interdimensional:"+a,window.Event&&"function"==typeof window.Event?b=new Event(a):(b=document.createEvent("Event"),b.initEvent(a,!0,!0)),document.dispatchEvent(b))}function e(){window.scrollBy(t,u),s&&o(e)}function f(){Interdimensional.toggle()}function g(a){s&&null!=j&&null!=k&&null!=l?window.innerHeight>window.innerWidth?(t=c(l,a.gamma),u=c(k,Math.abs(a.gamma)>90?180-a.beta:a.beta)):(t=c(j,a.alpha),u=c(Math.abs(l),Math.abs(a.gamma))):(j=a.alpha,k=a.beta,l=a.gamma)}function h(){Interdimensional.kick()}function i(){var a=document.body.getAttribute("data-interdimensional");null!=a&&Interdimensional.charge(b(a))}var j,k,l,m,n,o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)},p={PPD:.8,insensitivity:5,useControl:!0,control:null},q=!1,r=!1,s=!1,t=0,u=0;return document.addEventListener("DOMContentLoaded",i,!1),{isCharged:function(){return q},isOn:function(){return s},charge:function(b){q||r||(r=!0,a(function(){q=!0,r=!1,m={};for(var a in p)p.hasOwnProperty(a)&&(m[a]=b&&"undefined"!=typeof b[a]?b[a]:p[a]);m.control?n=m.control:(n=document.createElement("div"),n.className="interdimensional-control"),m.useControl&&document.body.appendChild(n),n.addEventListener("touchstart",f,!1),window.addEventListener("deviceorientation",g,!1),window.addEventListener("orientationchange",h,!1),d("charge")},function(){r=!1,d("fail")}))},jump:function(){q&&(s=!0,n.classList.add("interdimensional-control-is-active"),e(),d("jump"))},kick:function(){q&&(s=!1,t=0,u=0,n.classList.remove("interdimensional-control-is-active"),d("kick"))},toggle:function(){s?Interdimensional.kick():Interdimensional.jump()},discharge:function(){q&&(Interdimensional.kick(),q=!1,m.useControl&&document.body.removeChild(n),n.removeEventListener("touchstart",f,!1),window.removeEventListener("deviceorientation",g,!1),window.removeEventListener("orientationchange",h,!1),d("discharge"))}}});